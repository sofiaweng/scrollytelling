---
import { Image } from "astro:assets";
import graf from "../assets/images/graf.svg";
import soejle1 from "../assets/images/soejle1.svg";
import soejle2 from "../assets/images/soejle2.svg";
import soejle3 from "../assets/images/soejle3.svg";
import soejle4 from "../assets/images/soejle4.svg";
import soejle5 from "../assets/images/soejle5.svg";
---

<div
  class="absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 z-10 max-w-4xl text-left"
>
</div>
<h1 class="text-4xl lg:text-6xl text-[#FF2A00]">Havets trusler</h1>
<div class="lg:grid grid-cols-2">
  <div class="bg-black/80 rounded-lg max-w-xl p-8">
    <p class="text-white text-base lg:text-lg">
      Grafen viser de fem mest almindelige typer affald, der findes i havet:
      plastikposer, plastikflasker, engangsbestik, emballage og syntetisk reb.
      Disse typer plastikaffald udgør en stor trussel for havlivet, da de
      nedbrydes meget langsomt og kan skade eller blive spist af havdyr. For at
      beskytte vores oceaner er det vigtigt at reducere brugen af engangsplastik
      og sikre korrekt affaldshåndtering.
    </p>
  </div>
  <div class="">
    <h2 class="text-2xl max-w-96 mb-4 text-white lg:text-4xl">
      Top 5 mest udbredte affald der forurener verdens hav
    </h2>
    <svg id="chart" width="100%" height="300" viewBox="0 0 600 300">
      <g transform="translate(50, 20)">
        <!-- Y-akse -->
        <line x1="0" y1="0" x2="0" y2="200" stroke="white"></line>
        <text
          x="-20"
          y="200"
          text-anchor="middle"
          class="text-sm font-mont"
          fill="white">0%</text
        >
        <text
          x="-20"
          y="150"
          text-anchor="middle"
          class="text-sm font-mont"
          fill="white">5%</text
        >
        <text
          x="-20"
          y="100"
          text-anchor="middle"
          class="text-sm font-mont"
          fill="white">10%</text
        >
        <text
          x="-20"
          y="50"
          text-anchor="middle"
          class="text-sm font-mont"
          fill="white">15%</text
        >

        <!-- Søjler -->
        <rect
          class="bar fill-customRed"
          x="50"
          y="50"
          width="40"
          height="150"
          fill="white"></rect>
        <rect
          class="bar fill-customRed"
          x="150"
          y="70"
          width="40"
          height="130"
          fill="white"></rect>
        <rect
          class="bar fill-customRed"
          x="250"
          y="90"
          width="40"
          height="110"
          fill="white"></rect>
        <rect
          class="bar fill-customRed"
          x="350"
          y="90"
          width="40"
          height="110"
          fill="white"></rect>
        <rect
          class="bar fill-customRed"
          x="450"
          y="130"
          width="40"
          height="70"
          fill="white"></rect>

        <!-- X-akse etiketter -->
        <text
          x="70"
          y="220"
          text-anchor="middle"
          class="text-sm font-mont"
          fill="white">Plastikposer</text
        >
        <text
          x="170"
          y="220"
          text-anchor="middle"
          class="text-sm font-mont"
          fill="white">Plastikflasker</text
        >
        <text
          x="270"
          y="220"
          text-anchor="middle"
          class="text-sm font-mont"
          fill="white">Bestik</text
        >
        <text
          x="370"
          y="220"
          text-anchor="middle"
          class="text-sm font-mont"
          fill="white">Indpakning</text
        >
        <text
          x="470"
          y="220"
          text-anchor="middle"
          class="text-sm font-mont"
          fill="white">Syntetisk reb</text
        >
      </g>
    </svg>
  </div>
</div>
<style>
  .bar {
    transform: scaleY(0);
    transform-origin: bottom;
    opacity: 0;
  }

  .animate-bars {
    animation: rise 0.8s forwards;
  }

  @keyframes rise {
    from {
      transform: scaleY(0);
      opacity: 0;
    }
    to {
      transform: scaleY(1);
      opacity: 1;
    }
  }

  .bar:nth-child(1) {
    animation-delay: 0s;
  }
  .bar:nth-child(2) {
    animation-delay: 0.1s;
  }
  .bar:nth-child(3) {
    animation-delay: 0.2s;
  }
  .bar:nth-child(4) {
    animation-delay: 0.3s;
  }
  .bar:nth-child(5) {
    animation-delay: 0.4s;
  }
</style>

<script>
  // JavaScript til at starte animationen, når grafen er i synsfeltet
  document.addEventListener("DOMContentLoaded", function () {
    const chart = document.getElementById("chart");
    const bars = chart.querySelectorAll(".bar");

    // Funktion til at starte animationen
    const startAnimation = () => {
      bars.forEach((bar) => bar.classList.add("animate-bars"));
    };

    // Intersection Observer til at observere, om grafen er i synsfeltet
    const observer = new IntersectionObserver((entries) => {
      entries.forEach((entry) => {
        if (entry.isIntersecting) {
          startAnimation();
          observer.unobserve(entry.target); // Stop observeringen efter animationen er startet
        }
      });
    });

    observer.observe(chart);
  });
</script>

<!-- <div class="container mx-auto flex flex-col lg:flex-row items-start gap-8">
  <h1 class="text-4xl lg:text-6xl text-[#FF2A00]">Skræmmende tal</h1>
  <div class="bg-[#000000]/80 p-8 flex flex-col gap-6 lg:gap-8 text-left">
    <h2 class="text-2xl lg:text-4xl text-white">
      Top 5 mest udbredte affald der forurener verdens hav
    </h2>
    <Image src={graf} alt="Graf vektorgrafik" class="w-3/5" />
</div>
</div> -->

<!-- <Image src={soejle1} alt="Søjle til søjlediagram" class="w-3/5" />
    <Image src={soejle2} alt="Søjle til søjlediagram" class="w-3/5" />
    <Image src={soejle3} alt="Søjle til søjlediagram" class="w-3/5" />
    <Image src={soejle4} alt="Søjle til søjlediagram" class="w-3/5" />
    <Image src={soejle5} alt="Søjle til søjlediagram" class="w-3/5" /> -->
