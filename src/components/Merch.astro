---
import { Image } from "astro:assets";
import seaweed from "../assets/images/seaweed.webp";
import fishbag from "../assets/images/fish_bag.webp";
import tshirt from "../assets/images/merch_shirt.webp";
import bottle from "../assets/images/sheer_bottle.webp";
import bag from "../assets/images/blue_plastic_bag2.webp";
---

<style>
  /* Base movement for scrolling effect */
  .scroll-move {
    transition: transform 0.2s ease-out;
    opacity: 0; /* Hidden initially */
  }

  .visible {
    opacity: 1; /* Become visible when in the viewport */
    transition: opacity 0.5s ease-out;
  }

  h1 {
    text-shadow: 2px 2px 4px #000000;
  }
</style>

<section
  class="relative bg-[#F8F8F8] py-16 overflow-hidden"
  id="scrollytelling-section"
>
  <!-- Background Plastic Images with Scroll Effect Classes -->
  <div class="relative max-w-6xl mx-auto h-[800px] overflow-visible">
    <!-- <Image
      src={}
      alt="Plastic Bag 1"
      class="absolute w-[500px] lg:w-[600px] top-0 left-[-100px] scroll-move"
    />
    <Image
      src={}
      alt="Plastic Bag 2"
      class="absolute w-[300px] lg:w-[350px] top-8 right-[250px] scroll-move"
    />
    <Image
      src={}
      alt="Plastic Bag 3"
      class="absolute w-[400px] lg:w-[450px] bottom-20 left-[200px] scroll-move"
    />
    <Image
      src={}
      alt="Plastic Bottle"
      class="absolute w-[150px] lg:w-[200px] bottom-32 left-[700px] scroll-move"
    />
    <Image
      src={}
      alt="Plastic Fork"
      class="absolute w-[120px] lg:w-[150px] top-32 right-[250px] scroll-move"
    />
    <Image
      src={}
      alt="Plastic Toothbrush"
      class="absolute w-[120px] lg:w-[150px] bottom-12 right-[-200px] scroll-move"
    /> -->

    <!-- Additional Fork and Toothbrush with Scroll Effect Classes -->
    <!-- <Image
      src={}
      alt="Plastic Fork"
      class="absolute w-[120px] lg:w-[150px] top-48 left-[-200px] scroll-move"
    />
    <Image
      src={}
      alt="Plastic Toothbrush"
      class="absolute w-[120px] lg:w-[150px] top-10 right-[250px] scroll-move"
    /> -->
  </div>

  <!-- Content Box with Absolute Positioning -->
  <div
    class="absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 z-10 max-w-4xl text-center"
  >
    <h1 class="text-4xl lg:text-6xl text-[#FF2A00] mb-8">Merchandise</h1>
    <h2>Vi donerer 5% af omsætningen til havet</h2>
    <div class="bg-[#001864] p-8">
      <p class="text-white text-base lg:text-lg">
        Køb miljøvenlige produkter, der støtter Plastic Change. Fra
        genanvendelige vandflasker til tasker lavet af genbrugsmaterialer – alt
        sammen til fordel for en plastikfri fremtid.
      </p>
    </div>
  </div>
</section>

<script>
  document.addEventListener("scroll", () => {
    const scrollSection = document.getElementById("scrollytelling-section");
    const scrollPosition = window.scrollY;
    const images = document.querySelectorAll(".scroll-move");
    const sectionTop = scrollSection.offsetTop;
    const sectionHeight = scrollSection.offsetHeight;
    const viewportHeight = window.innerHeight;

    // Check if section is in the viewport
    const sectionInView =
      scrollPosition + viewportHeight > sectionTop &&
      scrollPosition < sectionTop + sectionHeight;

    images.forEach((img, index) => {
      const speed = 0.5 + index * 0.1;
      const horizontalOffset = (scrollPosition - sectionTop) * speed;
      const rotation = (scrollPosition - sectionTop) * (0.05 + index * 0.05); // Rotation factor based on scroll

      if (sectionInView) {
        img.style.transform = `translateX(${horizontalOffset}px) rotate(${rotation}deg)`;
        img.classList.add("visible");
      } else {
        img.classList.remove("visible");
      }
    });
  });
</script>
